<!DOCTYPE html>
<html>
<head>
    <title>멘토링 상담 챗봇</title>
</head>
<body>
    <h1>멘토링 상담 챗봇</h1>
    <form id="chat-form" method="post">
        {% csrf_token %}
        <label for="message">메시지:</label>
        <input type="text" id="message" name="message">
        <button type="submit">전송</button>
    </form>
    <div id="chat-response"></div>
    <div id="recommendations"></div>

    <script>
        document.getElementById("chat-form").onsubmit = async function(event) {
            event.preventDefault();
            let formData = new FormData(this);
            
            let response = await fetch("{% url 'chat_with_gpt' %}", {
                method: "POST",
                body: formData,
            });
            
            let data = await response.json();
            document.getElementById("chat-response").innerText = data.chat_response;
            
            let recommendationsDiv = document.getElementById("recommendations");
            recommendationsDiv.innerHTML = "";
            data.recommendations.forEach(function(recommendation) {
                let div = document.createElement("div");
                div.innerHTML = `
                    <h2>${recommendation.title}</h2>
                    <p>${recommendation.description}</p>
                    <p>카테고리: ${recommendation.mentoring_category}</p>
                    <p>진행 방식: ${recommendation.place_type}</p>
                    <p>기간: ${recommendation.period}</p>
                    <p>가능 요일: ${recommendation.day}</p>
                    <p>모집 인원: ${recommendation.mentee_num}</p>
                    <p>키워드: ${recommendation.mentoring_keyword}</p>
                    <p>분위기: ${recommendation.mood_type}</p>
                    <p>상태: ${recommendation.status}</p>
                `;
                recommendationsDiv.appendChild(div);
            });
        };
    </script>
</body>
</html>
